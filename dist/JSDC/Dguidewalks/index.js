import{__awaiter as e,__generator as t,__spreadArray as r}from"../../node_modules/tslib/tslib.es6.js";import{omit as o}from"lodash";import n from"./ApiProvider.js";import i from"./createLayer/createTileLayer.js";import a from"./createLayer/createGeoJSONLayer.js";import s from"../utils/Event.js";var u=function(){function u(e){this.gisDataLoadEvent=new s,this.config=e.config,this.basemap=e.basemap,this.api=new n(this.config)}return Object.defineProperty(u.prototype,"eventId",{get:function(){return this.config.eventId},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"baseApiUrl",{get:function(){return this.config.baseApiUrl},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"configProvider",{get:function(){return this.config},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"apiProvider",{get:function(){return this.api},enumerable:!1,configurable:!0}),u.prototype.loadBasemap=function(){return this.basemap.listAll().map((function(e){var t=e.name,r=e.url;return i(t,r)}))},u.prototype.loadGisData=function(){return e(this,void 0,void 0,(function(){var e,n;return t(this,(function(t){switch(t.label){case 0:return[4,this.apiProvider.getLayers()];case 1:return e=t.sent(),n=[],e.forEach((function(e){var t=o(e,["Basemap","LineFeatures","PointFeatures","PolygonFeatures"]),r=e.LineFeatures,i=e.PointFeatures,s=e.PolygonFeatures,u=e.type,p=r.length>0&&"line"===u,c=i.length>0&&"point"===u,f=s.length>0&&"polygon"===u;p&&n.push(a(r,t)),c&&n.push(a(i,t)),f&&n.push(a(s,t))})),[2,r(r([],n,!0),this.loadBasemap(),!0)]}}))}))},u}();export{u as default};
//# sourceMappingURL=index.js.map
