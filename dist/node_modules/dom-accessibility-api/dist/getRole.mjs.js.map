{"version":3,"file":"getRole.mjs.js","sources":["../../../../node_modules/dom-accessibility-api/dist/getRole.mjs"],"sourcesContent":["// https://w3c.github.io/html-aria/#document-conformance-requirements-for-use-of-aria-attributes-in-html\n\n/**\n * Safe Element.localName for all supported environments\n * @param element\n */\nexport function getLocalName(element) {\n  var _element$localName;\n\n  return (// eslint-disable-next-line no-restricted-properties -- actual guard for environments without localName\n    (_element$localName = element.localName) !== null && _element$localName !== void 0 ? _element$localName : // eslint-disable-next-line no-restricted-properties -- required for the fallback\n    element.tagName.toLowerCase()\n  );\n}\nvar localNameToRoleMappings = {\n  article: \"article\",\n  aside: \"complementary\",\n  button: \"button\",\n  datalist: \"listbox\",\n  dd: \"definition\",\n  details: \"group\",\n  dialog: \"dialog\",\n  dt: \"term\",\n  fieldset: \"group\",\n  figure: \"figure\",\n  // WARNING: Only with an accessible name\n  form: \"form\",\n  footer: \"contentinfo\",\n  h1: \"heading\",\n  h2: \"heading\",\n  h3: \"heading\",\n  h4: \"heading\",\n  h5: \"heading\",\n  h6: \"heading\",\n  header: \"banner\",\n  hr: \"separator\",\n  html: \"document\",\n  legend: \"legend\",\n  li: \"listitem\",\n  math: \"math\",\n  main: \"main\",\n  menu: \"list\",\n  nav: \"navigation\",\n  ol: \"list\",\n  optgroup: \"group\",\n  // WARNING: Only in certain context\n  option: \"option\",\n  output: \"status\",\n  progress: \"progressbar\",\n  // WARNING: Only with an accessible name\n  section: \"region\",\n  summary: \"button\",\n  table: \"table\",\n  tbody: \"rowgroup\",\n  textarea: \"textbox\",\n  tfoot: \"rowgroup\",\n  // WARNING: Only in certain context\n  td: \"cell\",\n  th: \"columnheader\",\n  thead: \"rowgroup\",\n  tr: \"row\",\n  ul: \"list\"\n};\nvar prohibitedAttributes = {\n  caption: new Set([\"aria-label\", \"aria-labelledby\"]),\n  code: new Set([\"aria-label\", \"aria-labelledby\"]),\n  deletion: new Set([\"aria-label\", \"aria-labelledby\"]),\n  emphasis: new Set([\"aria-label\", \"aria-labelledby\"]),\n  generic: new Set([\"aria-label\", \"aria-labelledby\", \"aria-roledescription\"]),\n  insertion: new Set([\"aria-label\", \"aria-labelledby\"]),\n  paragraph: new Set([\"aria-label\", \"aria-labelledby\"]),\n  presentation: new Set([\"aria-label\", \"aria-labelledby\"]),\n  strong: new Set([\"aria-label\", \"aria-labelledby\"]),\n  subscript: new Set([\"aria-label\", \"aria-labelledby\"]),\n  superscript: new Set([\"aria-label\", \"aria-labelledby\"])\n};\n/**\n *\n * @param element\n * @param role The role used for this element. This is specified to control whether you want to use the implicit or explicit role.\n */\n\nfunction hasGlobalAriaAttributes(element, role) {\n  // https://rawgit.com/w3c/aria/stable/#global_states\n  // commented attributes are deprecated\n  return [\"aria-atomic\", \"aria-busy\", \"aria-controls\", \"aria-current\", \"aria-describedby\", \"aria-details\", // \"disabled\",\n  \"aria-dropeffect\", // \"errormessage\",\n  \"aria-flowto\", \"aria-grabbed\", // \"haspopup\",\n  \"aria-hidden\", // \"invalid\",\n  \"aria-keyshortcuts\", \"aria-label\", \"aria-labelledby\", \"aria-live\", \"aria-owns\", \"aria-relevant\", \"aria-roledescription\"].some(function (attributeName) {\n    var _prohibitedAttributes;\n\n    return element.hasAttribute(attributeName) && !((_prohibitedAttributes = prohibitedAttributes[role]) !== null && _prohibitedAttributes !== void 0 && _prohibitedAttributes.has(attributeName));\n  });\n}\n\nfunction ignorePresentationalRole(element, implicitRole) {\n  // https://rawgit.com/w3c/aria/stable/#conflict_resolution_presentation_none\n  return hasGlobalAriaAttributes(element, implicitRole);\n}\n\nexport default function getRole(element) {\n  var explicitRole = getExplicitRole(element);\n\n  if (explicitRole === null || explicitRole === \"presentation\") {\n    var implicitRole = getImplicitRole(element);\n\n    if (explicitRole !== \"presentation\" || ignorePresentationalRole(element, implicitRole || \"\")) {\n      return implicitRole;\n    }\n  }\n\n  return explicitRole;\n}\n\nfunction getImplicitRole(element) {\n  var mappedByTag = localNameToRoleMappings[getLocalName(element)];\n\n  if (mappedByTag !== undefined) {\n    return mappedByTag;\n  }\n\n  switch (getLocalName(element)) {\n    case \"a\":\n    case \"area\":\n    case \"link\":\n      if (element.hasAttribute(\"href\")) {\n        return \"link\";\n      }\n\n      break;\n\n    case \"img\":\n      if (element.getAttribute(\"alt\") === \"\" && !ignorePresentationalRole(element, \"img\")) {\n        return \"presentation\";\n      }\n\n      return \"img\";\n\n    case \"input\":\n      {\n        var _ref = element,\n            type = _ref.type;\n\n        switch (type) {\n          case \"button\":\n          case \"image\":\n          case \"reset\":\n          case \"submit\":\n            return \"button\";\n\n          case \"checkbox\":\n          case \"radio\":\n            return type;\n\n          case \"range\":\n            return \"slider\";\n\n          case \"email\":\n          case \"tel\":\n          case \"text\":\n          case \"url\":\n            if (element.hasAttribute(\"list\")) {\n              return \"combobox\";\n            }\n\n            return \"textbox\";\n\n          case \"search\":\n            if (element.hasAttribute(\"list\")) {\n              return \"combobox\";\n            }\n\n            return \"searchbox\";\n\n          case \"number\":\n            return \"spinbutton\";\n\n          default:\n            return null;\n        }\n      }\n\n    case \"select\":\n      if (element.hasAttribute(\"multiple\") || element.size > 1) {\n        return \"listbox\";\n      }\n\n      return \"combobox\";\n  }\n\n  return null;\n}\n\nfunction getExplicitRole(element) {\n  var role = element.getAttribute(\"role\");\n\n  if (role !== null) {\n    var explicitRole = role.trim().split(\" \")[0]; // String.prototype.split(sep, limit) will always return an array with at least one member\n    // as long as limit is either undefined or > 0\n\n    if (explicitRole.length > 0) {\n      return explicitRole;\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=getRole.mjs.map"],"names":["getLocalName","element","_element$localName","localName","tagName","toLowerCase","localNameToRoleMappings","article","aside","button","datalist","dd","details","dialog","dt","fieldset","figure","form","footer","h1","h2","h3","h4","h5","h6","header","hr","html","legend","li","math","main","menu","nav","ol","optgroup","option","output","progress","section","summary","table","tbody","textarea","tfoot","td","th","thead","tr","ul","prohibitedAttributes","caption","Set","code","deletion","emphasis","generic","insertion","paragraph","presentation","strong","subscript","superscript","ignorePresentationalRole","implicitRole","role","some","attributeName","_prohibitedAttributes","hasAttribute","has","hasGlobalAriaAttributes","getRole","explicitRole","getAttribute","trim","split","length","getExplicitRole","mappedByTag","undefined","type","size","getImplicitRole"],"mappings":"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"}