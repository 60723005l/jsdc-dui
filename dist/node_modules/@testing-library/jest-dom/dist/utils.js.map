{"version":3,"file":"utils.js","sources":["../../../../../node_modules/@testing-library/jest-dom/dist/utils.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NodeTypeError = exports.HtmlElementTypeError = void 0;\nexports.checkHtmlElement = checkHtmlElement;\nexports.checkNode = checkNode;\nexports.compareArraysAsSet = compareArraysAsSet;\nexports.deprecate = deprecate;\nexports.getMessage = getMessage;\nexports.getSingleElementValue = getSingleElementValue;\nexports.getTag = getTag;\nexports.matches = matches;\nexports.normalize = normalize;\nexports.parseCSS = parseCSS;\nexports.toSentence = toSentence;\n\nvar _redent = _interopRequireDefault(require(\"redent\"));\n\nvar _parse = _interopRequireDefault(require(\"css/lib/parse\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nclass GenericTypeError extends Error {\n  constructor(expectedString, received, matcherFn, context) {\n    super();\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, matcherFn);\n    }\n\n    let withType = '';\n\n    try {\n      withType = context.utils.printWithType('Received', received, context.utils.printReceived);\n    } catch (e) {// Can throw for Document:\n      // https://github.com/jsdom/jsdom/issues/2304\n    }\n\n    this.message = [context.utils.matcherHint(`${context.isNot ? '.not' : ''}.${matcherFn.name}`, 'received', ''), '', // eslint-disable-next-line @babel/new-cap\n    `${context.utils.RECEIVED_COLOR('received')} value must ${expectedString}.`, withType].join('\\n');\n  }\n\n}\n\nclass HtmlElementTypeError extends GenericTypeError {\n  constructor(...args) {\n    super('be an HTMLElement or an SVGElement', ...args);\n  }\n\n}\n\nexports.HtmlElementTypeError = HtmlElementTypeError;\n\nclass NodeTypeError extends GenericTypeError {\n  constructor(...args) {\n    super('be a Node', ...args);\n  }\n\n}\n\nexports.NodeTypeError = NodeTypeError;\n\nfunction checkHasWindow(htmlElement, ErrorClass, ...args) {\n  if (!htmlElement || !htmlElement.ownerDocument || !htmlElement.ownerDocument.defaultView) {\n    throw new ErrorClass(htmlElement, ...args);\n  }\n}\n\nfunction checkNode(node, ...args) {\n  checkHasWindow(node, NodeTypeError, ...args);\n  const window = node.ownerDocument.defaultView;\n\n  if (!(node instanceof window.Node)) {\n    throw new NodeTypeError(node, ...args);\n  }\n}\n\nfunction checkHtmlElement(htmlElement, ...args) {\n  checkHasWindow(htmlElement, HtmlElementTypeError, ...args);\n  const window = htmlElement.ownerDocument.defaultView;\n\n  if (!(htmlElement instanceof window.HTMLElement) && !(htmlElement instanceof window.SVGElement)) {\n    throw new HtmlElementTypeError(htmlElement, ...args);\n  }\n}\n\nclass InvalidCSSError extends Error {\n  constructor(received, matcherFn, context) {\n    super();\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, matcherFn);\n    }\n\n    this.message = [received.message, '', // eslint-disable-next-line @babel/new-cap\n    context.utils.RECEIVED_COLOR(`Failing css:`), // eslint-disable-next-line @babel/new-cap\n    context.utils.RECEIVED_COLOR(`${received.css}`)].join('\\n');\n  }\n\n}\n\nfunction parseCSS(css, ...args) {\n  const ast = (0, _parse.default)(`selector { ${css} }`, {\n    silent: true\n  }).stylesheet;\n\n  if (ast.parsingErrors && ast.parsingErrors.length > 0) {\n    const {\n      reason,\n      line\n    } = ast.parsingErrors[0];\n    throw new InvalidCSSError({\n      css,\n      message: `Syntax error parsing expected css: ${reason} on line: ${line}`\n    }, ...args);\n  }\n\n  const parsedRules = ast.rules[0].declarations.filter(d => d.type === 'declaration').reduce((obj, {\n    property,\n    value\n  }) => Object.assign(obj, {\n    [property]: value\n  }), {});\n  return parsedRules;\n}\n\nfunction display(context, value) {\n  return typeof value === 'string' ? value : context.utils.stringify(value);\n}\n\nfunction getMessage(context, matcher, expectedLabel, expectedValue, receivedLabel, receivedValue) {\n  return [`${matcher}\\n`, // eslint-disable-next-line @babel/new-cap\n  `${expectedLabel}:\\n${context.utils.EXPECTED_COLOR((0, _redent.default)(display(context, expectedValue), 2))}`, // eslint-disable-next-line @babel/new-cap\n  `${receivedLabel}:\\n${context.utils.RECEIVED_COLOR((0, _redent.default)(display(context, receivedValue), 2))}`].join('\\n');\n}\n\nfunction matches(textToMatch, matcher) {\n  if (matcher instanceof RegExp) {\n    return matcher.test(textToMatch);\n  } else {\n    return textToMatch.includes(String(matcher));\n  }\n}\n\nfunction deprecate(name, replacementText) {\n  // Notify user that they are using deprecated functionality.\n  // eslint-disable-next-line no-console\n  console.warn(`Warning: ${name} has been deprecated and will be removed in future updates.`, replacementText);\n}\n\nfunction normalize(text) {\n  return text.replace(/\\s+/g, ' ').trim();\n}\n\nfunction getTag(element) {\n  return element.tagName && element.tagName.toLowerCase();\n}\n\nfunction getSelectValue({\n  multiple,\n  options\n}) {\n  const selectedOptions = [...options].filter(option => option.selected);\n\n  if (multiple) {\n    return [...selectedOptions].map(opt => opt.value);\n  }\n  /* istanbul ignore if */\n\n\n  if (selectedOptions.length === 0) {\n    return undefined; // Couldn't make this happen, but just in case\n  }\n\n  return selectedOptions[0].value;\n}\n\nfunction getInputValue(inputElement) {\n  switch (inputElement.type) {\n    case 'number':\n      return inputElement.value === '' ? null : Number(inputElement.value);\n\n    case 'checkbox':\n      return inputElement.checked;\n\n    default:\n      return inputElement.value;\n  }\n}\n\nfunction getSingleElementValue(element) {\n  /* istanbul ignore if */\n  if (!element) {\n    return undefined;\n  }\n\n  switch (element.tagName.toLowerCase()) {\n    case 'input':\n      return getInputValue(element);\n\n    case 'select':\n      return getSelectValue(element);\n\n    default:\n      return element.value;\n  }\n}\n\nfunction compareArraysAsSet(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (0, _isEqual.default)(new Set(a), new Set(b));\n  }\n\n  return undefined;\n}\n\nfunction toSentence(array, {\n  wordConnector = ', ',\n  lastWordConnector = ' and '\n} = {}) {\n  return [array.slice(0, -1).join(wordConnector), array[array.length - 1]].join(array.length > 1 ? lastWordConnector : '');\n}"],"names":["_interopRequireDefault","require$$0","Object","defineProperty","utils","value","NodeTypeError","HtmlElementTypeError","checkHtmlElement","htmlElement","args","checkHasWindow","window","ownerDocument","defaultView","HTMLElement","SVGElement","checkNode","node","Node","compareArraysAsSet","a","b","Array","isArray","_isEqual","default","Set","deprecate","name","replacementText","console","warn","getMessage","context","matcher","expectedLabel","expectedValue","receivedLabel","receivedValue","EXPECTED_COLOR","_redent","display","RECEIVED_COLOR","join","getSingleElementValue","element","tagName","toLowerCase","inputElement","type","Number","checked","getInputValue","multiple","options","selectedOptions","filter","option","selected","map","opt","length","getSelectValue","getTag","matches","textToMatch","RegExp","test","includes","String","normalize","text","replace","trim","parseCSS","css","ast","_parse","silent","stylesheet","parsingErrors","reason","line","InvalidCSSError","message","rules","declarations","d","reduce","obj","property","assign","toSentence","array","wordConnector","lastWordConnector","slice","require$$1","require$$2","require$$3","GenericTypeError","Error","constructor","expectedString","received","matcherFn","super","captureStackTrace","this","withType","printWithType","printReceived","e","matcherHint","isNot","ErrorClass","stringify"],"mappings":"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"}