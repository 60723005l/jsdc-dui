{"version":3,"file":"to-have-style.js","sources":["../../../../../node_modules/@testing-library/jest-dom/dist/to-have-style.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toHaveStyle = toHaveStyle;\n\nvar _chalk = _interopRequireDefault(require(\"chalk\"));\n\nvar _utils = require(\"./utils\");\n\nfunction getStyleDeclaration(document, css) {\n  const styles = {}; // The next block is necessary to normalize colors\n\n  const copy = document.createElement('div');\n  Object.keys(css).forEach(property => {\n    copy.style[property] = css[property];\n    styles[property] = copy.style[property];\n  });\n  return styles;\n}\n\nfunction isSubset(styles, computedStyle) {\n  return !!Object.keys(styles).length && Object.entries(styles).every(([prop, value]) => computedStyle[prop] === value || computedStyle.getPropertyValue(prop.toLowerCase()) === value);\n}\n\nfunction printoutStyles(styles) {\n  return Object.keys(styles).sort().map(prop => `${prop}: ${styles[prop]};`).join('\\n');\n} // Highlights only style rules that were expected but were not found in the\n// received computed styles\n\n\nfunction expectedDiff(diffFn, expected, computedStyles) {\n  const received = Array.from(computedStyles).filter(prop => expected[prop] !== undefined).reduce((obj, prop) => Object.assign(obj, {\n    [prop]: computedStyles.getPropertyValue(prop)\n  }), {});\n  const diffOutput = diffFn(printoutStyles(expected), printoutStyles(received)); // Remove the \"+ Received\" annotation because this is a one-way diff\n\n  return diffOutput.replace(`${_chalk.default.red('+ Received')}\\n`, '');\n}\n\nfunction toHaveStyle(htmlElement, css) {\n  (0, _utils.checkHtmlElement)(htmlElement, toHaveStyle, this);\n  const parsedCSS = typeof css === 'object' ? css : (0, _utils.parseCSS)(css, toHaveStyle, this);\n  const {\n    getComputedStyle\n  } = htmlElement.ownerDocument.defaultView;\n  const expected = getStyleDeclaration(htmlElement.ownerDocument, parsedCSS);\n  const received = getComputedStyle(htmlElement);\n  return {\n    pass: isSubset(expected, received),\n    message: () => {\n      const matcher = `${this.isNot ? '.not' : ''}.toHaveStyle`;\n      return [this.utils.matcherHint(matcher, 'element', ''), expectedDiff(this.utils.diff, expected, received)].join('\\n\\n');\n    }\n  };\n}"],"names":["_interopRequireDefault","require$$0","Object","defineProperty","toHaveStyle_1","value","toHaveStyle","htmlElement","css","_utils","checkHtmlElement","this","parsedCSS","parseCSS","getComputedStyle","ownerDocument","defaultView","expected","document","styles","copy","createElement","keys","forEach","property","style","getStyleDeclaration","received","pass","computedStyle","length","entries","every","prop","getPropertyValue","toLowerCase","message","matcher","isNot","utils","matcherHint","expectedDiff","diff","join","_chalk","require$$1","require$$2","printoutStyles","sort","map","diffFn","computedStyles","Array","from","filter","undefined","reduce","obj","assign","replace","default","red"],"mappings":"+YAEA,IAAIA,EAAyBC,EAAAA,QAE7BC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAEUD,EAAAE,YAoCnB,SAASA,EAAYC,EAAaC,IAChC,EAAIC,EAAOC,kBAAkBH,EAAaD,EAAaK,MACvD,MAAMC,EAA2B,iBAARJ,EAAmBA,GAAM,EAAIC,EAAOI,UAAUL,EAAKF,EAAaK,OACnFG,iBACJA,GACEP,EAAYQ,cAAcC,YACxBC,EApCR,SAA6BC,EAAUV,GACrC,MAAMW,EAAS,GAETC,EAAOF,EAASG,cAAc,OAKpC,OAJAnB,OAAOoB,KAAKd,GAAKe,SAAQC,IACvBJ,EAAKK,MAAMD,GAAYhB,EAAIgB,GAC3BL,EAAOK,GAAYJ,EAAKK,MAAMD,MAEzBL,EA4BUO,CAAoBnB,EAAYQ,cAAeH,GAC1De,EAAWb,EAAiBP,GAClC,MAAO,CACLqB,MA5BcT,EA4BCF,EA5BOY,EA4BGF,IA3BlBzB,OAAOoB,KAAKH,GAAQW,QAAU5B,OAAO6B,QAAQZ,GAAQa,OAAM,EAAEC,EAAM5B,KAAWwB,EAAcI,KAAU5B,GAASwB,EAAcK,iBAAiBD,EAAKE,iBAAmB9B,KA4B7K+B,QAAS,KACP,MAAMC,GAAa1B,KAAK2B,MAAQ,OAAS,IAAzB,eAChB,MAAO,CAAC3B,KAAK4B,MAAMC,YAAYH,EAAS,UAAW,IAAKI,EAAa9B,KAAK4B,MAAMG,KAAMzB,EAAUU,IAAWgB,KAAK,UA/BtH,IAAkBxB,EAAQU,GAf1B,IAAIe,EAAS5C,EAAuB6C,GAEhCpC,EAASqC,EAiBb,SAASC,EAAe5B,GACtB,OAAOjB,OAAOoB,KAAKH,GAAQ6B,OAAOC,KAAIhB,GAAQ,GAAGA,MAASd,EAAOc,QAAUU,KAAK,MAKlF,SAASF,EAAaS,EAAQjC,EAAUkC,GACtC,MAAMxB,EAAWyB,MAAMC,KAAKF,GAAgBG,QAAOrB,QAA2BsB,IAAnBtC,EAASgB,KAAqBuB,QAAO,CAACC,EAAKxB,IAAS/B,OAAOwD,OAAOD,EAAK,CAChIxB,CAACA,GAAOkB,EAAejB,iBAAiBD,MACtC,IAGJ,OAFmBiB,EAAOH,EAAe9B,GAAW8B,EAAepB,IAEjDgC,QAAQ,GAAGf,EAAOgB,QAAQC,IAAI,kBAAmB"}